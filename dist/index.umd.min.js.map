{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///index.umd.min.js","webpack:///webpack/bootstrap fd5c986b214c580ff896","webpack:///./src/consolePatch.js","webpack:///./src/http.formData.browser.js","webpack:///./src/http.post.browser.js","webpack:///./src/unhandle.browser.js","webpack:///./src/index.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","default","fn","Error","originalWarn","console","warn","bind","originalError","error","_len","arguments","length","args","Array","_key","concat","_len2","_key2","url","formData","cb","request","XMLHttpRequest","open","send","onload","params","setRequestHeader","JSON","stringify","window","addEventListener","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","obj","constructor","_createClass","defineProperties","target","props","descriptor","writable","key","protoProps","staticProps","consolePatch","unhandleSubscribe","httpPost","httpFormData","errorsToTelegram","config","inited","botId","chatId","undefined","apiUrl","handleError","handleConsole","message","createErrorMessage","handleErrorMessage","createConsoleMessage","apply","_this","html2canvas","onPhotoSent","sendMessage","makeScreenShot","blob","sendPhoto","md","IS_BROWSER","location","href","navigator","userAgent","type","getCommonInfo","join","stack","document","body","then","canvas","toBlob","FormData","append","text","chat_id","disable_web_page_preview","parse_mode"],"mappings":"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","file":"index.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"errorsToTelegram\"] = factory();\n\telse\n\t\troot[\"errorsToTelegram\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"errorsToTelegram\"] = factory();\n\telse\n\t\troot[\"errorsToTelegram\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"./dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (fn) {\n  if (typeof fn !== 'function') throw new Error('consolePatch: fn must be a function');\n\n  var originalWarn = console.warn.bind(console);\n  var originalError = console.error.bind(console);\n\n  console.warn = function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    fn.apply(undefined, ['warn'].concat(args)), originalWarn.apply(undefined, args);\n  };\n  console.error = function () {\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    fn.apply(undefined, ['error'].concat(args)), originalError.apply(undefined, args);\n  };\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (url, formData, cb) {\n  var request = new XMLHttpRequest();\n  request.open('POST', url);\n  request.send(formData);\n  request.onload = cb;\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (url, params) {\n  var request = new XMLHttpRequest();\n  request.open('POST', url, true);\n  request.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\n  request.send(JSON.stringify(params));\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (fn) {\n  if (typeof fn !== 'function') throw new Error('unhandle: fn must me a function');\n  window.addEventListener('error', fn);\n  window.addEventListener('unhandledrejection', fn);\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar consolePatch = __webpack_require__(0).default;\n\nvar unhandleSubscribe =  true ? __webpack_require__(3).default : require('./unhandle.node').default;\n\nvar httpPost =  true ? __webpack_require__(2).default : require('./http.post.node').default;\n\nvar httpFormData =  true ? __webpack_require__(1).default : null;\n\nvar errorsToTelegram = function () {\n  function errorsToTelegram(config) {\n    _classCallCheck(this, errorsToTelegram);\n\n    this.inited = false;\n    this.botId = null;\n    this.chatId = null;\n  }\n\n  _createClass(errorsToTelegram, [{\n    key: 'init',\n    value: function init() {\n      var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this.inited) throw new Error('errorsToTelegram already inited');\n      if (!config.botId) throw new Error('botId must be provided');\n      if (!config.chatId) throw new Error('chatId must be provided');\n\n      this.botId = config.botId;\n      this.chatId = config.chatId;\n      this.apiUrl = 'https://api.telegram.org/bot' + this.botId;\n      this.inited = true;\n\n      unhandleSubscribe(this.handleError.bind(this));\n      consolePatch(this.handleConsole.bind(this));\n    }\n  }, {\n    key: 'handleError',\n    value: function handleError(error) {\n      var message = this.createErrorMessage(error);\n      this.handleErrorMessage(message);\n    }\n  }, {\n    key: 'handleConsole',\n    value: function handleConsole() {\n      var message = this.createConsoleMessage.apply(this, arguments);\n      this.handleErrorMessage(message);\n    }\n  }, {\n    key: 'handleErrorMessage',\n    value: function handleErrorMessage(message) {\n      var _this = this;\n\n      if (true) {\n        if (!window.html2canvas) return;\n        var onPhotoSent = function onPhotoSent() {\n          return _this.sendMessage(message);\n        };\n        this.makeScreenShot(function (blob) {\n          return _this.sendPhoto(blob, onPhotoSent);\n        });\n      } else this.sendMessage(message);\n    }\n  }, {\n    key: 'getCommonInfo',\n    value: function getCommonInfo() {\n      var md = '*' + ( true ? 'browser' : 'server') + '*';\n      md +=  true ? '\\n' + location.href : '';\n      md +=  true ? '\\n' + navigator.userAgent : '';\n      return md;\n    }\n  }, {\n    key: 'createConsoleMessage',\n    value: function createConsoleMessage(type) {\n      var md = this.getCommonInfo();\n\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      md += args.length ? '\\n`console.' + type + '(' + args.join(', ') + ')`' : '';\n      return md;\n    }\n  }, {\n    key: 'createErrorMessage',\n    value: function createErrorMessage(error) {\n      var md = this.getCommonInfo();\n\n      if ((typeof error === 'undefined' ? 'undefined' : _typeof(error)) === 'object') {\n        var originalError = error.error || error;\n        if (originalError.stack) md += '\\n`' + originalError.stack + '`';else md += '\\n`' + originalError.message + '`';\n      } else {\n        md += '\\n' + error;\n      }\n\n      return md;\n    }\n  }, {\n    key: 'makeScreenShot',\n    value: function makeScreenShot(cb) {\n      var promise = html2canvas(document.body);\n      promise.then(function (canvas) {\n        canvas.toBlob(cb, 'image/jpeg', 0.7);\n      });\n    }\n  }, {\n    key: 'sendPhoto',\n    value: function sendPhoto(blob, cb) {\n      var url = this.apiUrl + '/sendPhoto';\n      var formData = new FormData();\n      formData.append('chat_id', this.chatId);\n      formData.append('photo', blob);\n      httpFormData(url, formData, cb);\n    }\n  }, {\n    key: 'sendMessage',\n    value: function sendMessage(text) {\n      var url = this.apiUrl + '/sendMessage';\n      httpPost(url, {\n        chat_id: this.chatId,\n        disable_web_page_preview: true,\n        parse_mode: 'markdown',\n        text: text\n      });\n    }\n  }]);\n\n  return errorsToTelegram;\n}();\n\nmodule.exports = new errorsToTelegram();\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// index.umd.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fd5c986b214c580ff896","export default fn => {\n  if (typeof fn !== 'function')\n    throw new Error('consolePatch: fn must be a function');\n\n  const originalWarn = console.warn.bind(console);\n  const originalError = console.error.bind(console);\n\n  console.warn = (...args) => {\n    fn('warn', ...args), originalWarn(...args);\n  };\n  console.error = (...args) => {\n    fn('error', ...args), originalError(...args);\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/consolePatch.js","export default (url, formData, cb) => {\n  const request = new XMLHttpRequest();\n  request.open('POST', url);\n  request.send(formData);\n  request.onload = cb;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/http.formData.browser.js","export default (url, params) => {\n  var request = new XMLHttpRequest();\n  request.open('POST', url, true);\n  request.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\n  request.send(JSON.stringify(params));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/http.post.browser.js","export default fn => {\n  if (typeof fn !== 'function')\n    throw new Error('unhandle: fn must me a function');\n  window.addEventListener('error', fn);\n  window.addEventListener('unhandledrejection', fn);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/unhandle.browser.js","const consolePatch = require('./consolePatch').default;\n\nconst unhandleSubscribe = IS_BROWSER\n  ? require('./unhandle.browser').default\n  : require('./unhandle.node').default;\n\nconst httpPost = IS_BROWSER\n  ? require('./http.post.browser').default\n  : require('./http.post.node').default;\n\nconst httpFormData = IS_BROWSER\n  ? require('./http.formData.browser').default\n  : null;\n\nclass errorsToTelegram {\n  constructor(config) {\n    this.inited = false;\n    this.botId = null;\n    this.chatId = null;\n  }\n\n  init(config = {}) {\n    if (this.inited) throw new Error('errorsToTelegram already inited');\n    if (!config.botId) throw new Error('botId must be provided');\n    if (!config.chatId) throw new Error('chatId must be provided');\n\n    this.botId = config.botId;\n    this.chatId = config.chatId;\n    this.apiUrl = `https://api.telegram.org/bot${this.botId}`;\n    this.inited = true;\n\n    unhandleSubscribe(this.handleError.bind(this));\n    consolePatch(this.handleConsole.bind(this));\n  }\n\n  handleError(error) {\n    const message = this.createErrorMessage(error);\n    this.handleErrorMessage(message);\n  }\n\n  handleConsole(...args) {\n    const message = this.createConsoleMessage(...args);\n    this.handleErrorMessage(message);\n  }\n\n  handleErrorMessage(message) {\n    if (IS_BROWSER) {\n      if (!window.html2canvas) return;\n      const onPhotoSent = () => this.sendMessage(message);\n      this.makeScreenShot(blob => this.sendPhoto(blob, onPhotoSent));\n    } else this.sendMessage(message);\n  }\n\n  getCommonInfo() {\n    let md = `*${IS_BROWSER ? 'browser' : 'server'}*`;\n    md += IS_BROWSER ? `\\n${location.href}` : '';\n    md += IS_BROWSER ? `\\n${navigator.userAgent}` : '';\n    return md;\n  }\n\n  createConsoleMessage(type, ...args) {\n    let md = this.getCommonInfo();\n    md += args.length ? `\\n\\`console.${type}(${args.join(', ')})\\`` : '';\n    return md;\n  }\n\n  createErrorMessage(error) {\n    let md = this.getCommonInfo();\n\n    if (typeof error === 'object') {\n      const originalError = error.error || error;\n      if (originalError.stack) md += `\\n\\`${originalError.stack}\\``;\n      else md += `\\n\\`${originalError.message}\\``;\n    } else {\n      md += '\\n' + error;\n    }\n\n    return md;\n  }\n\n  makeScreenShot(cb) {\n    const promise = html2canvas(document.body);\n    promise.then(canvas => {\n      canvas.toBlob(cb, 'image/jpeg', 0.7);\n    });\n  }\n\n  sendPhoto(blob, cb) {\n    const url = `${this.apiUrl}/sendPhoto`;\n    const formData = new FormData();\n    formData.append('chat_id', this.chatId);\n    formData.append('photo', blob);\n    httpFormData(url, formData, cb);\n  }\n\n  sendMessage(text) {\n    const url = `${this.apiUrl}/sendMessage`;\n    httpPost(url, {\n      chat_id: this.chatId,\n      disable_web_page_preview: true,\n      parse_mode: 'markdown',\n      text,\n    });\n  }\n}\n\nmodule.exports = new errorsToTelegram();\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}